import{a as ge,b as U,c as ve,d as b,e as we,f as C,g as be}from"./chunk-VWM3UOL5.js";import{a as le,c as ue,d as de,e as he,g as me}from"./chunk-VAKTKOK7.js";import{a as ke}from"./chunk-ODCVDHWO.js";import{f as fe}from"./chunk-K5MJWRHU.js";import{A,Aa as k,Ab as x,B as m,C as f,Cb as pe,Db as N,Ga as J,I as l,K as z,Na as ee,Q as G,Rb as ce,U as E,Ub as F,W as Q,Wa as te,Ya as D,Z as R,a as V,aa as q,ca as _,da as X,db as u,e as _e,eb as d,f as B,fa as g,fb as v,ia as $,ib as re,l as H,nb as ne,ob as oe,p as T,pb as ie,q as K,qb as se,ra as Y,rb as P,t as c,vb as w,w as Z,x as M,yb as ae,z as O}from"./chunk-FQUE7PF6.js";var ye=[{path:"",redirectTo:"home",pathMatch:"full"},{path:"home",loadComponent:()=>import("./chunk-DVUUX3SG.js").then(t=>t.HomeComponent),data:{animation:"lobby"}},{path:"lobby",loadComponent:()=>import("./chunk-MQ2XHNLR.js").then(t=>t.LobbyComponent),data:{animation:"lobby"}},{path:"game",loadComponent:()=>import("./chunk-SXRKZIRW.js").then(t=>t.GameComponent),data:{animation:"game"}}];var I="Service workers are disabled or not supported by this browser";function De(t){return M(()=>K(new Error(t)))}var y=class{constructor(o){if(this.serviceWorker=o,!o)this.worker=this.events=this.registration=De(I);else{let r=O(o,"controllerchange").pipe(c(()=>o.controller)),n=M(()=>T(o.controller)),s=Z(n,r);this.worker=s.pipe(f(h=>!!h)),this.registration=this.worker.pipe(E(()=>o.getRegistration()));let L=O(o,"message").pipe(c(h=>h.data)).pipe(f(h=>h&&h.type)).pipe(G());L.connect(),this.events=L}}postMessage(o,e){return this.worker.pipe(l(1),Q(r=>{r.postMessage(V({action:o},e))})).toPromise().then(()=>{})}postMessageWithOperation(o,e,r){let n=this.waitForOperationCompleted(r),s=this.postMessage(o,e);return Promise.all([s,n]).then(([,i])=>i)}generateNonce(){return Math.round(Math.random()*1e7)}eventsOfType(o){let e;return typeof o=="string"?e=r=>r.type===o:e=r=>o.includes(r.type),this.events.pipe(f(e))}nextEventOfType(o){return this.eventsOfType(o).pipe(l(1))}waitForOperationCompleted(o){return this.eventsOfType("OPERATION_COMPLETED").pipe(f(e=>e.nonce===o),l(1),c(e=>{if(e.result!==void 0)return e.result;throw new Error(e.error)})).toPromise()}get isEnabled(){return!!this.serviceWorker}},Pe=(()=>{class t{get isEnabled(){return this.sw.isEnabled}constructor(e){if(this.sw=e,this.pushManager=null,this.subscriptionChanges=new H,!e.isEnabled){this.messages=m,this.notificationClicks=m,this.subscription=m;return}this.messages=this.sw.eventsOfType("PUSH").pipe(c(n=>n.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(c(n=>n.data)),this.pushManager=this.sw.registration.pipe(c(n=>n.pushManager));let r=this.pushManager.pipe(E(n=>n.getSubscription()));this.subscription=A(r,this.subscriptionChanges)}requestSubscription(e){if(!this.sw.isEnabled||this.pushManager===null)return Promise.reject(new Error(I));let r={userVisibleOnly:!0},n=this.decodeBase64(e.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),s=new Uint8Array(new ArrayBuffer(n.length));for(let i=0;i<n.length;i++)s[i]=n.charCodeAt(i);return r.applicationServerKey=s,this.pushManager.pipe(E(i=>i.subscribe(r)),l(1)).toPromise().then(i=>(this.subscriptionChanges.next(i),i))}unsubscribe(){if(!this.sw.isEnabled)return Promise.reject(new Error(I));let e=r=>{if(r===null)throw new Error("Not subscribed to push notifications.");return r.unsubscribe().then(n=>{if(!n)throw new Error("Unsubscribe failed!");this.subscriptionChanges.next(null)})};return this.subscription.pipe(l(1),E(e)).toPromise()}decodeBase64(e){return atob(e)}static{this.\u0275fac=function(r){return new(r||t)(_(y))}}static{this.\u0275prov=R({token:t,factory:t.\u0275fac})}}return t})(),xe=(()=>{class t{get isEnabled(){return this.sw.isEnabled}constructor(e){if(this.sw=e,!e.isEnabled){this.versionUpdates=m,this.unrecoverable=m;return}this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(I));let e=this.sw.generateNonce();return this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:e},e)}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(I));let e=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:e},e)}static{this.\u0275fac=function(r){return new(r||t)(_(y))}}static{this.\u0275prov=R({token:t,factory:t.\u0275fac})}}return t})();var Ee=new q("");function Ne(t,o,e,r){return()=>{if(!(F(r)&&"serviceWorker"in navigator&&e.enabled!==!1))return;let n=t.get(ee),s=t.get(x);n.runOutsideAngular(()=>{let a=navigator.serviceWorker,p=()=>a.controller?.postMessage({action:"INITIALIZE"});a.addEventListener("controllerchange",p),s.onDestroy(()=>{a.removeEventListener("controllerchange",p)})});let i;if(typeof e.registrationStrategy=="function")i=e.registrationStrategy();else{let[a,...p]=(e.registrationStrategy||"registerWhenStable:30000").split(":");switch(a){case"registerImmediately":i=T(null);break;case"registerWithDelay":i=Ce(+p[0]||0);break;case"registerWhenStable":i=p[0]?A(Se(t),Ce(+p[0])):Se(t);break;default:throw new Error(`Unknown ServiceWorker registration strategy: ${e.registrationStrategy}`)}}n.runOutsideAngular(()=>i.pipe(l(1)).subscribe(()=>navigator.serviceWorker.register(o,{scope:e.scope}).catch(a=>console.error("Service worker registration failed with:",a))))}}function Ce(t){return T(null).pipe(z(t))}function Se(t){return t.get(x).isStable.pipe(f(e=>e))}function Fe(t,o){return new y(F(o)&&t.enabled!==!1?navigator.serviceWorker:void 0)}var S=class{};function W(t,o={}){return $([Pe,xe,{provide:Ee,useValue:t},{provide:S,useValue:o},{provide:y,useFactory:Fe,deps:[S,k]},{provide:ae,useFactory:Ne,deps:[Y,Ee,S,k],multi:!0}])}var Ie={providers:[pe({eventCoalescing:!0}),me(ye),fe,be(),le(),W("ngsw-worker.js",{enabled:!N(),registrationStrategy:"registerWhenStable:30000"}),W("ngsw-worker.js",{enabled:!N(),registrationStrategy:"registerWhenStable:30000"})]};var Te=(()=>{class t{goBack(){window.history.back()}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275cmp=g({type:t,selectors:[["app-header"]],standalone:!0,features:[w],decls:5,vars:0,consts:[[1,"flex","header","w-full","h-[10svh]","justify-between","px-5"],[3,"click"]],template:function(r,n){r&1&&(u(0,"div",0)(1,"button",1),re("click",function(){return n.goBack()}),P(2,"BACK"),d(),u(3,"button"),P(4,"GEAR"),d()())}})}}return t})();var Me=ge("routeAnimations",[we("* <=> *",[b({position:"relative"}),C(":enter, :leave",[b({position:"absolute",top:0,left:0,width:"100%",height:"100%"})],{optional:!0}),C(":enter",[b({opacity:0,transform:"translateX(100%)"})],{optional:!0}),ve([C(":leave",[U("300ms ease-out",b({opacity:0,transform:"translateX(-100%)"}))],{optional:!0}),C(":enter",[U("300ms ease-out",b({opacity:1,transform:"translateX(0)"}))],{optional:!0})])])]);var Oe=_e(ke());var Ue=["riveCanvas"],Ae=(()=>{class t{constructor(){this.riveUrl="le_titube.riv",this.riveInstance=null}ngAfterViewInit(){setTimeout(()=>{this.loadRiveAnimation()})}loadRiveAnimation(){return B(this,null,function*(){if(this.canvas)try{this.riveInstance=new Oe.Rive({canvas:this.canvas.nativeElement,src:this.riveUrl,autoplay:!0,artboard:"logo",onLoad:()=>{console.log("Rive file loaded!"),console.log(this.riveInstance?.contents.artboards)},onLoadError:e=>{console.error("Rive file error:",e)}}),this.riveInstance.resizeToCanvas(),this.riveInstance.resizeDrawingSurfaceToCanvas()}catch(e){console.error("Erreur lors du chargement de l'animation Rive:",e)}})}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275cmp=g({type:t,selectors:[["app-splash-screen"]],viewQuery:function(r,n){if(r&1&&ne(Ue,5),r&2){let s;oe(s=ie())&&(n.canvas=s.first)}},standalone:!0,features:[w],decls:3,vars:0,consts:[["riveCanvas",""],[1,"splash-container"],["id","riveCanvas",1,"w-full","h-full","max-h-[250pt]"]],template:function(r,n){r&1&&(u(0,"div",1),v(1,"canvas",2,0),d())},styles:[".splash-container[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100svw;height:100svh;display:flex;flex-direction:column;justify-content:center;align-items:center;background-color:#faf4e4;z-index:9999}.loader[_ngcontent-%COMP%]{border:5px solid #f3f3f3;border-radius:50%;border-top:5px solid #3498db;width:50px;height:50px;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}"]})}}return t})();function je(t,o){t&1&&v(0,"app-splash-screen")}var Re=(()=>{class t{constructor(){this.router=X(he),this.showSplash=!0}ngOnInit(){setTimeout(()=>{this.showSplash=!1},3e3)}getRouteState(e){return e?.activatedRouteData?.animation||"initial"}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275cmp=g({type:t,selectors:[["app-root"]],standalone:!0,features:[w],decls:5,vars:2,consts:[["outlet","outlet"],[4,"ngIf"],[1,"max-w-[1000pt]","h-[90svh]","mx-auto"]],template:function(r,n){if(r&1&&(te(0,je,1,0,"app-splash-screen",1),v(1,"app-header"),u(2,"main",2),v(3,"router-outlet",null,0),d()),r&2){let s=se(4);D("ngIf",n.showSplash),J(2),D("@routeAnimations",n.getRouteState(s))}},dependencies:[de,Te,Ae,ce],encapsulation:2,data:{animation:[Me]}})}}return t})();ue(Re,Ie).catch(t=>console.error(t));
