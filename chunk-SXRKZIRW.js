import{a as te}from"./chunk-ODCVDHWO.js";import{a as p,b as U,c as H,d as J,e as W,f as Y}from"./chunk-K5MJWRHU.js";import{$a as b,Da as M,Ga as o,Hb as N,Sb as Q,Wa as g,Ya as A,_a as d,a as v,ab as k,b as E,bb as z,cb as V,da as T,db as l,e as ee,eb as a,f as D,fa as h,fb as m,gb as w,ib as I,jb as c,kb as j,lb as B,mb as O,na as S,nb as G,oa as _,ob as F,pb as K,rb as u,sb as f,tb as x,ua as L,vb as C}from"./chunk-FQUE7PF6.js";var Z=ee(te());var re=["*"];function ne(t,n){if(t&1&&(l(0,"li",7),u(1),a()),t&2){let e=n.$implicit;o(),x(" ",e," ")}}var $=(()=>{class t{constructor(){this.letter="R",this.title="Pouvoir : Roi du regard",this.card=L.required(),this.backgrounds=["bg-[#73B4BD]","bg-[#E6BF25]","bg-[#A8C521]","bg-[#996AC1]"],this.texts=["text-[#73B4BD]","text-[#E6BF25]","text-[#A8C521]","text-[#996AC1]"],this.borders=["border-[#73B4BD]","border-[#E6BF25]","border-[#A8C521]","border-[#996AC1]"]}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=h({type:t,selectors:[["app-card"]],inputs:{letter:"letter",title:"title",card:[1,"card"]},standalone:!0,features:[C],ngContentSelectors:re,decls:15,vars:13,consts:[[1,"w-full","h-full","bg-white","rounded-3xl","relative","overflow-hidden","p-4","shadow-lg","border-4"],[1,"absolute","top-4","left-4","w-16","h-16","rounded-lg","flex","items-center","justify-center","z-20"],[1,"text-white","text-4xl","font-bold"],[1,"absolute","right-4","top-5","text-9xl","font-bold","opacity-20","z-20"],[1,"w-full","h-3/5","mt-20","relative","z-20"],[1,"absolute","bottom-6","left-6","right-6","z-20"],[1,"text-3xl","text-center","font-bold","leading-tight"],[1,"text-center","text-xl","leading-tight"],[1,"absolute","bottom-0","left-0","h-[25vw]","w-[25vw]","min-w-[300pt]","min-h-[300pt]","max-h-[500px]","max-w-[500px]","rounded-full","-translate-x-[15%]","translate-y-[15%]","opacity-20","z-10"]],template:function(i,r){i&1&&(j(),l(0,"div",0)(1,"div",1)(2,"span",2),u(3),a()(),l(4,"div",3),u(5),a(),l(6,"div",4),B(7),a(),l(8,"div",5)(9,"h2",6),u(10),a(),l(11,"ul"),z(12,ne,2,1,"li",7,k),a()(),m(14,"div",8),a()),i&2&&(d(r.borders[r.card().theme||0]),o(),d(r.backgrounds[r.card().theme||0]),o(2),f(r.card().value),o(),d(r.texts[r.card().theme||0]),o(),x(" ",r.card().value," "),o(4),d(r.texts[r.card().theme||0]),o(),x(" ",r.card().title," "),o(2),V(r.card().rules),o(2),d(r.backgrounds[r.card().theme||0]))},dependencies:[Q]})}}return t})();var q=[{value:"A",rive:"1-Titou-Pinces",title:"Shi-fu-shot",rules:["Shi-fu-mi avec quelqu'un, le perdant boit"],theme:0},{value:"2",rive:"2b-titete.png",title:"Titou ordonne",rules:["Donne 2 gorg\xE9es"],theme:0},{value:"3",rive:"3b-titete.png",title:"Titou ramasse",rules:["Bois 3 gorg\xE9es"],theme:0},{value:"4",rive:"4b-titete.png",title:"Titou partage",rules:["Donne 2 gorg\xE9es et bois 2 gorg\xE9es"],theme:0},{value:"5",rive:"5b-titete.png",title:"Partez devant",rules:["Ceux qui ont leur verre moins rempli que celui qui pioche la carte boivent"],theme:0},{value:"6",rive:"6b-titete.png",title:"Voiture-balai",rules:["Ceux qui ont leur verre plus rempli que celui qui pioche la carte boivent"],theme:0},{value:"7",rive:"7b-titete.png",title:"Pouvoir : Roi du pouce",rules:["Le dernier \xE0 mettre le pouce sur son front a perdu et boit"],theme:0},{value:"8",rive:"8b-titete.png",title:"Copain de boisson",rules:["Lie-toi \xE0 quelqu'un, quand l'un boit, l'autre boit avec lui"],theme:0},{value:"9",rive:"9b-titete.png",title:"Mini-jeu : Les rimes",rules:["Tu donne un mot, tout le monde doit trouver un mot qui rime, le premier qui perd boit"],theme:0},{value:"10",rive:"10b-titete.png",title:"Tit'tourn\xE9e",rules:["Tout le monde bois"],theme:0},{value:"V",rive:"4-Titou-Carton",title:"Alcooliques anonymes",rules:["R\xE8gle : plus le droit de dire nom pr\xE9nom"],theme:0},{value:"D",rive:"12-Titou-Chaise",title:"Titou voit double",rules:["Mini-jeu : Les th\xE8mes","La reine des putes : si tu pose une question et qu'on te r\xE9pond, il/elle boit, si on te dit tais-toi/ ta geule, tu bois"],theme:0},{value:"R",rive:"5-Titou-Ronflex",title:"Roi du regard",rules:["Si quelqu'un te regarde, il/elle boit"],theme:0},{value:"A",rive:"15-Titou-Caillou",title:"Shi-fu-shot",rules:["Shi-fu-mi avec quelqu'un, le perdant boit"],theme:1},{value:"2",rive:"2y-titete.png",title:"Titou ordonne",rules:["Donne 2 gorg\xE9es"],theme:1},{value:"3",rive:"3y-titete.png",title:"Titou ramasse",rules:["Bois 3 gorg\xE9es"],theme:1},{value:"4",rive:"4y-titete.png",title:"Titou partage",rules:["Donne 2 gorg\xE9es et bois 2 gorg\xE9es"],theme:1},{value:"5",rive:"5y-titete.png",title:"Partez devant",rules:["Ceux qui ont leur verre moins rempli que celui qui pioche la carte boivent"],theme:1},{value:"6",rive:"6y-titete.png",title:"Voiture-balai",rules:["Ceux qui ont leur verre plus rempli que celui qui pioche la carte boivent"],theme:1},{value:"7",rive:"7y-titete.png",title:"Pouvoir : Roi du pouce",rules:["Le dernier \xE0 mettre le pouce sur son front a perdu et boit"],theme:1},{value:"8",rive:"8y-titete.png",title:"Copain de boisson",rules:["Lie-toi \xE0 quelqu'un, quand l'un boit, l'autre boit avec lui"],theme:1},{value:"9",rive:"9y-titete.png",title:"Mini-jeu : Les rimes",rules:["Tu donne un mot, tout le monde doit trouver un mot qui rime, le premier qui perd boit"],theme:1},{value:"10",rive:"10y-titete.png",title:"Tit'tourn\xE9e",rules:["Tout le monde bois"],theme:1},{value:"V",rive:"9-Titou-Viking",title:"Ni oui ni non",rules:["R\xE8gle : plus le droit de dire oui et non"],theme:1},{value:"D",rive:"14-Titou-Pyromane",title:"Titou voit double",rules:["Mini-jeu : Les th\xE8mes","La reine des putes : si tu pose une question et qu'on te r\xE9pond, il/elle boit, si on te dit tais-toi/ ta geule, tu bois"],theme:1},{value:"R",rive:"7-Titou-Kebab",title:"Roi du regard",rules:["Si quelqu'un te regarde, il/elle boit"],theme:1},{value:"A",rive:"6-Titou-Tonneau",title:"Shi-fu-shot",rules:["Shi-fu-mi avec quelqu'un, le perdant boit"],theme:2},{value:"2",rive:"2g-titete.png",title:"Titou ordonne",rules:["Donne 2 gorg\xE9es"],theme:2},{value:"3",rive:"3g-titete.png",title:"Titou ramasse",rules:["Bois 3 gorg\xE9es"],theme:2},{value:"4",rive:"4g-titete.png",title:"Titou partage",rules:["Donne 2 gorg\xE9es et bois 2 gorg\xE9es"],theme:2},{value:"5",rive:"5g-titete.png",title:"Partez devant",rules:["Ceux qui ont leur verre moins rempli que celui qui pioche la carte boivent"],theme:2},{value:"6",rive:"6g-titete.png",title:"Voiture-balai",rules:["Ceux qui ont leur verre plus rempli que celui qui pioche la carte boivent"],theme:2},{value:"7",rive:"7g-titete.png",title:"Pouvoir : Roi du pouce",rules:["Le dernier \xE0 mettre le pouce sur son front a perdu et boit"],theme:2},{value:"8",rive:"8g-titete.png",title:"Copain de boisson",rules:["Lie-toi \xE0 quelqu'un, quand l'un boit, l'autre boit avec lui"],theme:2},{value:"9",rive:"9g-titete.png",title:"Mini-jeu : Les rimes",rules:["Tu donne un mot, tout le monde doit trouver un mot qui rime, le premier qui perd boit"],theme:2},{value:"10",rive:"10g-titete.png",title:"Tit'tourn\xE9e",rules:["Tout le monde bois"],theme:2},{value:"V",rive:"2-Titou-Shrek",title:"Restons fleuris",rules:["R\xE8gle : plus le droit \xE0 toute sorte de politesse"],theme:2},{value:"D",rive:"16-Titou-Patrick",title:"Titou voit double",rules:["Mini-jeu : Les th\xE8mes","La reine des putes : si tu pose une question et qu'on te r\xE9pond, il/elle boit, si on te dit tais-toi/ ta geule, tu bois"],theme:2},{value:"R",rive:"11-Titou-Clown",title:"Roi du regard",rules:["Si quelqu'un te regarde, il/elle boit"],theme:2},{value:"A",rive:"8-Titou-Pompom-Girl",title:"Shi-fu-shot",rules:["Shi-fu-mi avec quelqu'un, le perdant boit"],theme:3},{value:"2",rive:"2p-titete.png",title:"Titou ordonne",rules:["Donne 2 gorg\xE9es"],theme:3},{value:"3",rive:"3p-titete.png",title:"Titou ramasse",rules:["Bois 3 gorg\xE9es"],theme:3},{value:"4",rive:"4p-titete.png",title:"Titou partage",rules:["Donne 2 gorg\xE9es et bois 2 gorg\xE9es"],theme:3},{value:"5",rive:"5p-titete.png",title:"Partez devant",rules:["Ceux qui ont leur verre moins rempli que celui qui pioche la carte boivent"],theme:3},{value:"6",rive:"6p-titete.png",title:"Voiture-balai",rules:["Ceux qui ont leur verre plus rempli que celui qui pioche la carte boivent"],theme:3},{value:"7",rive:"7p-titete.png",title:"Pouvoir : Roi du pouce",rules:["Le dernier \xE0 mettre le pouce sur son front a perdu et boit"],theme:3},{value:"8",rive:"8p-titete.png",title:"Copain de boisson",rules:["Lie-toi \xE0 quelqu'un, quand l'un boit, l'autre boit avec lui"],theme:3},{value:"9",rive:"9p-titete.png",title:"Mini-jeu : Les rimes",rules:["Tu donne un mot, tout le monde doit trouver un mot qui rime, le premier qui perd boit"],theme:3},{value:"10",rive:"10p-titete.png",title:"Tit'tourn\xE9e",rules:["Tout le monde bois"],theme:3},{value:"V",rive:"13-Titou-Alchimiste",title:"Chercheur mixologue",rules:["R\xE8gle : invente une nouvelle r\xE8gle"],theme:3},{value:"D",rive:"3-Titou-Festoch",title:"Titou voit double",rules:["Mini-jeu : Les th\xE8mes","La reine des putes : si tu pose une question et qu'on te r\xE9pond, il/elle boit, si on te dit tais-toi/ ta geule, tu bois"],theme:3},{value:"R",rive:"10-Titou-Gamer",title:"Roi du regard",rules:["Si quelqu'un te regarde, il/elle boit"],theme:3}];var R="game-store",oe={cards:q,cardsOut:[],card:null,isPlaying:!1,currentPlayer:""},y=t=>{localStorage.setItem(R,JSON.stringify(t))},X=U({providedIn:"root"},W(oe),J(t=>({addCarteOut(n){p(t,e=>{let i=e.cards.filter(s=>s!==n),r={cards:i,cardsOut:[...e.cardsOut,n],card:n};if(i.length===0){let s={cards:q,cardsOut:[],card:null,isPlaying:!1,currentPlayer:""};return y(s),s}return y(v(v({},e),r)),r})},reset(){let n={cards:q,cardsOut:[],card:null,isPlaying:!1,currentPlayer:""};p(t,n),y(n)},setCurrentPlayer(n){p(t,e=>{let i=E(v({},e),{currentPlayer:n});return y(i),i})}})),H({onInit:t=>{let n=localStorage.getItem(R);if(n)try{let e=JSON.parse(n);p(t,e)}catch(e){console.error("Erreur lors du chargement du state:",e),localStorage.removeItem(R)}}}));var le=["riveCanvas"];function ae(t,n){if(t&1&&(l(0,"h2",2),u(1," Au tour de "),l(2,"span",7),u(3),a()()),t&2){let e=c(2);o(3),f(e.game().player)}}function ue(t,n){if(t&1&&m(0,"img",5),t&2){let e=c(2);O("src","titetes/",e.card.rive,"",M)}}function se(t,n){if(t&1){let e=w();g(0,ae,4,1,"h2",2),l(1,"app-card",3),m(2,"canvas",4,0),g(4,ue,1,2,"img",5),a(),l(5,"button",6),I("click",function(){S(e);let r=c();return _(r.changeAnimation())}),u(6," Au suivant "),a()}if(t&2){let e=c();b(e.game().player?0:-1),o(),A("card",e.card),o(3),b(e.game().isRive?-1:4)}}function de(t,n){if(t&1){let e=w();l(0,"h2",2),u(1,"La partie est finie"),a(),l(2,"button",8),I("click",function(){S(e);let r=c();return _(r.changeAnimation())}),u(3," Relancer une partie "),a()}}var Re=(()=>{class t{constructor(){this.#e=T(X),this.#t=T(Y),this.card=this.#e.card(),this.game=N(()=>(this.card=this.#e.card(),{out:this.#e.cardsOut(),deck:this.#e.cards(),player:this.#e.currentPlayer(),card:this.#e.card(),isRive:!this.card?.rive.endsWith(".png")})),this.riveUrl="le_titube.riv",this.riveInstance=null}#e;#t;ngOnInit(){window.addEventListener("resize",this.onResize.bind(this))}ngAfterViewInit(){setTimeout(()=>{this.loadRiveAnimation()})}ngOnDestroy(){window.removeEventListener("resize",this.onResize.bind(this))}loadRiveAnimation(){return D(this,null,function*(){if(this.canvas)try{this.riveInstance=new Z.Rive({canvas:this.canvas.nativeElement,src:this.riveUrl,autoplay:!0,artboard:"lesTitous"}),this.riveInstance.resizeToCanvas(),this.riveInstance.resizeDrawingSurfaceToCanvas(),console.log(this.riveInstance)}catch(e){console.error("Erreur lors du chargement de l'animation Rive:",e)}})}onResize(){if(this.canvas&&this.riveInstance){let e=this.canvas.nativeElement,i=e.parentElement;i&&(e.width=i.clientWidth,e.height=i.clientHeight,this.riveInstance.resizeToCanvas())}}changeAnimation(){let e=Math.floor(Math.random()*this.#e.cards().length),i=this.#t.usernames(),r=this.#e.currentPlayer(),s=0;if(r&&(s=(i.indexOf(r)+1)%i.length),this.#e.addCarteOut(this.#e.cards()[e]),this.#e.setCurrentPlayer(i[s]),this.riveInstance&&this.game().isRive){let P=this.riveInstance.animationNames,ce=Math.floor(Math.random()*P.length);console.log(this.card?.rive),this.riveInstance.play(this.card?.rive)}console.log(this.game())}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=h({type:t,selectors:[["app-game"]],viewQuery:function(i,r){if(i&1&&G(le,5),i&2){let s;F(s=K())&&(r.canvas=s.first)}},standalone:!0,features:[C],decls:3,vars:1,consts:[["riveCanvas",""],[1,"flex","flex-col","justify-center","items-center","h-full"],[1,"text-4xl","font-bold"],[1,"block","w-[80%]","h-full",3,"card"],["id","riveCanvas"],[1,"absolute","top-0","bottom-0","left-0","right-0","m-auto",3,"src"],["routerLink","/lobby",1,"rounded-lg","py-2","px-4","h-[70pt]","bg-orange-500","w-[80%]","text-white","text-3xl","my-5",3,"click"],[1,"text-[#FA7B53]","font-bold"],[1,"rounded-lg","py-2","px-4","h-[70pt]","bg-orange-500","w-[80%]","text-white","text-3xl","my-5",3,"click"]],template:function(i,r){i&1&&(l(0,"div",1),g(1,se,7,3)(2,de,4,0),a()),i&2&&(o(),b(r.card?1:2))},dependencies:[$],styles:["canvas[_ngcontent-%COMP%]{width:100%;height:100%}"]})}}return t})();export{Re as GameComponent};
