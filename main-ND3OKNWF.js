import{a as Se,b as Ie,c as Me,d as xe,e as Te,f as _e,g as Oe,h as R,i as Ae}from"./chunk-BYMLZ67F.js";import{a as ve,b as ge,d as ye}from"./chunk-IST3TAYH.js";import{a as Re}from"./chunk-26JHGPTC.js";import{a as we,b as z,c as be,d as w,f as Ce,g as E,h as Ee}from"./chunk-PYVQM6HD.js";import{a as fe,c as he}from"./chunk-VST4UDAW.js";import{a as Pe}from"./chunk-E2RJYBBM.js";import"./chunk-LJWCK34M.js";import{$a as j,A as D,B as g,Bb as u,C as y,Da as F,Fb as le,Hb as V,I as h,Ja as U,Jb as de,K as X,Ka as re,Kb as ue,Q as $,Qa as ie,U as C,W as G,Z as L,Za as oe,Zb as me,a as Q,aa as Y,ab as se,ac as W,ca as N,da as J,e as B,f as M,ga as d,ib as p,ja as ee,jb as c,ka as te,kb as a,l as q,nb as ae,p as x,q as K,t as f,ta as ne,tb as T,ub as _,vb as O,w as Z,wb as pe,x as P,xb as ce,z as k}from"./chunk-J47CFDLK.js";var ke=[{path:"",redirectTo:"home",pathMatch:"full"},{path:"home",loadComponent:()=>import("./chunk-3WAW4I7W.js").then(t=>t.HomeComponent),data:{animation:"lobby"}},{path:"lobby",loadComponent:()=>import("./chunk-PQKHPA5S.js").then(t=>t.LobbyComponent),data:{animation:"lobby"}},{path:"game",loadComponent:()=>import("./chunk-ZPHBGXRK.js").then(t=>t.GameComponent),data:{animation:"game"}},{path:"rules",loadComponent:()=>import("./chunk-UUYU6XCC.js").then(t=>t.RulesViewComponent),data:{animation:"rules"}}];var I="Service workers are disabled or not supported by this browser";function qe(t){return P(()=>K(new Error(t)))}var b=class{constructor(i){if(this.serviceWorker=i,!i)this.worker=this.events=this.registration=qe(I);else{let n=k(i,"controllerchange").pipe(f(()=>i.controller)),r=P(()=>x(i.controller)),s=Z(r,n);this.worker=s.pipe(y(v=>!!v)),this.registration=this.worker.pipe(C(()=>i.getRegistration()));let H=k(i,"message").pipe(f(v=>v.data)).pipe(y(v=>v&&v.type)).pipe($());H.connect(),this.events=H}}postMessage(i,e){return this.worker.pipe(h(1),G(n=>{n.postMessage(Q({action:i},e))})).toPromise().then(()=>{})}postMessageWithOperation(i,e,n){let r=this.waitForOperationCompleted(n),s=this.postMessage(i,e);return Promise.all([s,r]).then(([,o])=>o)}generateNonce(){return Math.round(Math.random()*1e7)}eventsOfType(i){let e;return typeof i=="string"?e=n=>n.type===i:e=n=>i.includes(n.type),this.events.pipe(y(e))}nextEventOfType(i){return this.eventsOfType(i).pipe(h(1))}waitForOperationCompleted(i){return this.eventsOfType("OPERATION_COMPLETED").pipe(y(e=>e.nonce===i),h(1),f(e=>{if(e.result!==void 0)return e.result;throw new Error(e.error)})).toPromise()}get isEnabled(){return!!this.serviceWorker}},Ke=(()=>{class t{get isEnabled(){return this.sw.isEnabled}constructor(e){if(this.sw=e,this.pushManager=null,this.subscriptionChanges=new q,!e.isEnabled){this.messages=g,this.notificationClicks=g,this.subscription=g;return}this.messages=this.sw.eventsOfType("PUSH").pipe(f(r=>r.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(f(r=>r.data)),this.pushManager=this.sw.registration.pipe(f(r=>r.pushManager));let n=this.pushManager.pipe(C(r=>r.getSubscription()));this.subscription=D(n,this.subscriptionChanges)}requestSubscription(e){if(!this.sw.isEnabled||this.pushManager===null)return Promise.reject(new Error(I));let n={userVisibleOnly:!0},r=this.decodeBase64(e.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),s=new Uint8Array(new ArrayBuffer(r.length));for(let o=0;o<r.length;o++)s[o]=r.charCodeAt(o);return n.applicationServerKey=s,this.pushManager.pipe(C(o=>o.subscribe(n)),h(1)).toPromise().then(o=>(this.subscriptionChanges.next(o),o))}unsubscribe(){if(!this.sw.isEnabled)return Promise.reject(new Error(I));let e=n=>{if(n===null)throw new Error("Not subscribed to push notifications.");return n.unsubscribe().then(r=>{if(!r)throw new Error("Unsubscribe failed!");this.subscriptionChanges.next(null)})};return this.subscription.pipe(h(1),C(e)).toPromise()}decodeBase64(e){return atob(e)}static{this.\u0275fac=function(n){return new(n||t)(N(b))}}static{this.\u0275prov=L({token:t,factory:t.\u0275fac})}}return t})(),Ze=(()=>{class t{get isEnabled(){return this.sw.isEnabled}constructor(e){if(this.sw=e,!e.isEnabled){this.versionUpdates=g,this.unrecoverable=g;return}this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(I));let e=this.sw.generateNonce();return this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:e},e)}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(I));let e=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:e},e)}static{this.\u0275fac=function(n){return new(n||t)(N(b))}}static{this.\u0275prov=L({token:t,factory:t.\u0275fac})}}return t})();var De=new Y("");function Xe(t,i,e,n){return()=>{if(!(W(n)&&"serviceWorker"in navigator&&e.enabled!==!1))return;let r=t.get(ie),s=t.get(V);r.runOutsideAngular(()=>{let l=navigator.serviceWorker,m=()=>l.controller?.postMessage({action:"INITIALIZE"});l.addEventListener("controllerchange",m),s.onDestroy(()=>{l.removeEventListener("controllerchange",m)})});let o;if(typeof e.registrationStrategy=="function")o=e.registrationStrategy();else{let[l,...m]=(e.registrationStrategy||"registerWhenStable:30000").split(":");switch(l){case"registerImmediately":o=x(null);break;case"registerWithDelay":o=Le(+m[0]||0);break;case"registerWhenStable":o=m[0]?D(Ne(t),Le(+m[0])):Ne(t);break;default:throw new Error(`Unknown ServiceWorker registration strategy: ${e.registrationStrategy}`)}}r.runOutsideAngular(()=>o.pipe(h(1)).subscribe(()=>navigator.serviceWorker.register(i,{scope:e.scope}).catch(l=>console.error("Service worker registration failed with:",l))))}}function Le(t){return x(null).pipe(X(t))}function Ne(t){return t.get(V).isStable.pipe(y(e=>e))}function $e(t,i){return new b(W(i)&&t.enabled!==!1?navigator.serviceWorker:void 0)}var S=class{};function Fe(t,i={}){return ee([Ke,Ze,{provide:De,useValue:t},{provide:S,useValue:i},{provide:b,useFactory:$e,deps:[S,F]},{provide:le,useFactory:Xe,deps:[ne,De,S,F],multi:!0}])}var Ue={providers:[de({eventCoalescing:!0}),ye(ke),Re,Ee(),fe(),te(R.pick({Home:Ie,Search:Me,ChevronLeft:Se,Settings:xe,UserRoundPlus:_e,SquareX:Te})),Fe("ngsw-worker.js",{enabled:!ue(),registrationStrategy:"registerWhenStable:30000"})]};var je=(()=>{class t{goBack(){window.history.back()}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=d({type:t,selectors:[["app-header"]],standalone:!0,features:[u],decls:5,vars:0,consts:[[1,"flex","header","w-full","h-[10svh]","justify-between","px-5"],[1,"my-2","flex","items-center","justify-center","rounded-xl","w-[40pt]","h-[40pt]","text-3xl","bg-orange-500","text-white",3,"click"],["name","chevron-left"],[1,"my-2","flex","items-center","justify-center","rounded-xl","w-[40pt]","h-[40pt]","text-3xl","bg-orange-500","text-white"],["name","settings"]],template:function(n,r){n&1&&(p(0,"div",0)(1,"button",1),ae("click",function(){return r.goBack()}),a(2,"lucide-icon",2),c(),p(3,"button",3),a(4,"lucide-icon",4),c()())},dependencies:[R,Oe]})}}return t})();var Ve=we("routeAnimations",[Ce("* <=> *",[w({position:"relative"}),E(":enter, :leave",[w({position:"absolute",top:0,left:0,width:"100%",height:"100%"})],{optional:!0}),E(":enter",[w({opacity:0,transform:"translateX(100%)"})],{optional:!0}),be([E(":leave",[z("300ms ease-out",w({opacity:0,transform:"translateX(-100%)"}))],{optional:!0}),E(":enter",[z("300ms ease-out",w({opacity:1,transform:"translateX(0)"}))],{optional:!0})])])]);var We=B(Pe());var Ge=["riveCanvas"],ze=(()=>{class t{constructor(){this.riveUrl="le_titube.riv",this.riveInstance=null}ngAfterViewInit(){setTimeout(()=>{this.loadRiveAnimation()})}loadRiveAnimation(){return M(this,null,function*(){if(this.canvas)try{this.riveInstance=new We.Rive({canvas:this.canvas.nativeElement,src:this.riveUrl,autoplay:!0,artboard:"logo",onLoad:()=>{console.log("Rive file loaded!",this.riveInstance?.contents),console.log(this.riveInstance?.contents.artboards)},onLoadError:e=>{console.error("Rive file error:",e)}}),this.riveInstance.resizeToCanvas(),this.riveInstance.resizeDrawingSurfaceToCanvas()}catch(e){console.error("Erreur lors du chargement de l'animation Rive:",e)}})}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=d({type:t,selectors:[["app-splash-screen"]],viewQuery:function(n,r){if(n&1&&T(Ge,5),n&2){let s;_(s=O())&&(r.canvas=s.first)}},standalone:!0,features:[u],decls:3,vars:0,consts:[["riveCanvas",""],[1,"splash-container"],["id","riveCanvas",1,"w-full","h-full","max-h-[250pt]"]],template:function(n,r){n&1&&(p(0,"div",1),a(1,"canvas",2,0),c())},styles:[".splash-container[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100svw;height:100svh;display:flex;flex-direction:column;justify-content:center;align-items:center;background-color:#faf4e4;z-index:9999}.loader[_ngcontent-%COMP%]{border:5px solid #f3f3f3;border-radius:50%;border-top:5px solid #3498db;width:50px;height:50px;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}"]})}}return t})();var He=B(Pe());var Ye=["riveCanvas"],Qe=(()=>{class t{constructor(e){this.loaderService=e,this.riveUrl="le_titube.riv",this.riveInstance=null}ngAfterViewInit(){this.loadRiveAnimation()}loadRiveAnimation(e){return M(this,null,function*(){if(this.canvas)try{this.riveInstance=new He.Rive({canvas:this.canvas.nativeElement,src:this.riveUrl,autoplay:!0,artboard:"titouLoading",onLoad:()=>{e&&this.riveInstance?.play(e)}}),this.riveInstance.resizeToCanvas(),this.riveInstance.resizeDrawingSurfaceToCanvas(),console.log(this.riveInstance)}catch(n){console.error("Erreur lors du chargement de l'animation Rive:",n)}})}static{this.\u0275fac=function(n){return new(n||t)(re(Ae))}}static{this.\u0275cmp=d({type:t,selectors:[["app-loader"]],viewQuery:function(n,r){if(n&1&&T(Ye,5),n&2){let s;_(s=O())&&(r.canvas=s.first)}},standalone:!0,features:[u],decls:5,vars:4,consts:[["riveCanvas",""],[1,"loader-overlay"],["id","riveCanvas"],[1,"bg-orange-500"]],template:function(n,r){n&1&&(p(0,"div",1),a(1,"canvas",2,0),p(3,"p",3),ce(4,"Chargement en cours..."),c()()),n&2&&se("z-index",r.loaderService.isLoading$()?"9999":"-1")("opacity",r.loaderService.isLoading$()?"1":"0")},styles:["canvas[_ngcontent-%COMP%]{max-width:300pt}p[_ngcontent-%COMP%]{font-size:18pt;color:#fff;border-radius:6px;padding:15px}.loader-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#faf4e4a8;z-index:9999;display:flex;flex-direction:column;justify-content:center;align-items:center;-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px);gap:20px}.loader[_ngcontent-%COMP%]{width:50px;height:50px;border:5px solid #f3f3f3;border-radius:50%;border-top:5px solid #3498db;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}"]})}}return t})();function Je(t,i){t&1&&a(0,"app-splash-screen")}var Be=(()=>{class t{constructor(){this.router=J(ge),this.showSplash=!0}ngOnInit(){setTimeout(()=>{this.showSplash=!1},3e3)}getRouteState(e){return e?.activatedRouteData?.animation||"initial"}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=d({type:t,selectors:[["app-root"]],standalone:!0,features:[u],decls:6,vars:2,consts:[["outlet","outlet"],[4,"ngIf"],[1,"max-w-[1000pt]","h-[90svh]","mx-auto"]],template:function(n,r){if(n&1&&(a(0,"app-loader"),oe(1,Je,1,0,"app-splash-screen",1),a(2,"app-header"),p(3,"main",2),a(4,"router-outlet",null,0),c()),n&2){let s=pe(5);U(),j("ngIf",r.showSplash),U(2),j("@routeAnimations",r.getRouteState(s))}},dependencies:[ve,je,ze,me,Qe],encapsulation:2,data:{animation:[Ve]}})}}return t})();he(Be,Ue).catch(t=>console.error(t));
