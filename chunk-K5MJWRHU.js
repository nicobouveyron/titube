import{Hb as g,Ib as m,Pa as w,Qa as k,Z as v,a as e,b as f,da as b,ta as j}from"./chunk-FQUE7PF6.js";function I(n){let t=m(()=>n());return x(t)?new Proxy(n,{get(o,i){return i in t?(w(o[i])||Object.defineProperty(o,i,{value:g(()=>o()[i]),configurable:!0}),I(o[i])):o[i]}}):n}function x(n){return n?.constructor===Object}var H=new WeakMap,c=Symbol("STATE_SOURCE");function l(n,...t){n[c].update(o=>t.reduce((i,r)=>e(e({},i),typeof r=="function"?r(i):r),o)),J(n)}function K(n){return n[c]()}function U(n){return H.get(n[c])||[]}function J(n){let t=U(n);for(let o of t){let i=m(()=>K(n));o(i)}}function D(...n){let t=[...n],o=typeof t[0]=="function"?{}:t.shift(),i=t;return(()=>{class s{constructor(){let a=i.reduce((d,W)=>W(d),N()),{stateSignals:S,computedSignals:A,methods:C,hooks:P}=a,h=e(e(e({},S),A),C);this[c]=a[c];for(let d in h)this[d]=h[d];let{onInit:p,onDestroy:y}=P;p&&p(),y&&b(j).onDestroy(y)}static \u0275fac=function(S){return new(S||s)};static \u0275prov=v({token:s,factory:s.\u0275fac,providedIn:o.providedIn||null})}return s})()}function N(){return{[c]:k({}),stateSignals:{},computedSignals:{},methods:{},hooks:{}}}function M(n){return t=>{let o=e(e(e({[c]:t[c]},t.stateSignals),t.computedSignals),t.methods),i=typeof n=="function"?n(o):n,r=s=>{let u=i[s],a=t.hooks[s];return u?()=>{a&&a(),u(o)}:a};return f(e({},t),{hooks:{onInit:r("onInit"),onDestroy:r("onDestroy")}})}}function T(n){return t=>{let o=n(e(e(e({[c]:t[c]},t.stateSignals),t.computedSignals),t.methods));return Object.keys(o),f(e({},t),{methods:e(e({},t.methods),o)})}}function E(n){return t=>{let o=typeof n=="function"?n():n,i=Object.keys(o);t[c].update(s=>e(e({},s),o));let r=i.reduce((s,u)=>{let a=g(()=>t[c]()[u]);return f(e({},s),{[u]:I(a)})},{});return f(e({},t),{stateSignals:e(e({},t.stateSignals),r)})}}var O="participants-store",_={usernames:[],isLoading:!1},R=n=>{localStorage.setItem(O,JSON.stringify(n))},Z=D({providedIn:"root"},E(_),T(n=>({addParticipant(t){l(n,o=>{let i={usernames:[...o.usernames,t]};return R(e(e({},o),i)),i})},removeParticipant(t){l(n,o=>{let i={usernames:o.usernames.filter(r=>r!==t)};return R(e(e({},o),i)),i})}})),M({onInit:n=>{let t=localStorage.getItem(O);t&&l(n,JSON.parse(t))}}));export{l as a,D as b,M as c,T as d,E as e,Z as f};
